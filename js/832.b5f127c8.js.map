{"version":3,"file":"js/832.b5f127c8.js","mappings":"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","sources":["webpack://toutiao-m/./src/views/search/search.vue","webpack://toutiao-m/./src/views/search/components/search-history.vue","webpack://toutiao-m/src/views/search/components/search-history.vue","webpack://toutiao-m/./src/views/search/components/search-history.vue?8ea9","webpack://toutiao-m/./src/views/search/components/search-history.vue?e2fe","webpack://toutiao-m/./src/views/search/components/search-suggestion.vue","webpack://toutiao-m/src/views/search/components/search-suggestion.vue","webpack://toutiao-m/./src/views/search/components/search-suggestion.vue?f1b1","webpack://toutiao-m/./src/views/search/components/search-suggestion.vue?9884","webpack://toutiao-m/./src/views/search/components/search-result.vue","webpack://toutiao-m/src/views/search/components/search-result.vue","webpack://toutiao-m/./src/views/search/components/search-result.vue?eb8a","webpack://toutiao-m/./src/views/search/components/search-result.vue?b3d2","webpack://toutiao-m/src/views/search/search.vue","webpack://toutiao-m/./src/views/search/search.vue?aa84","webpack://toutiao-m/./src/views/search/search.vue?e193"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search-container\"},[_c('form',{attrs:{\"action\":\"/\"}},[_c('van-search',{attrs:{\"show-action\":\"\",\"background\":\"#3296fa\",\"placeholder\":\"请输入搜索关键词\"},on:{\"search\":_vm.onSearch,\"cancel\":_vm.onCancel,\"focus\":function($event){_vm.isResultShow = false}},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}})],1),(_vm.isResultShow)?_c('search-result',{attrs:{\"searchText\":_vm.searchText}}):(_vm.searchText)?_c('search-suggestion',{attrs:{\"searchText\":_vm.searchText},on:{\"search\":_vm.onSearch}}):_c('search-history',{ref:\"search-history\",attrs:{\"searchHistories\":_vm.searchHistories},on:{\"clearAll\":function($event){_vm.searchHistories = []},\"clearHistory\":_vm.onClearHistory,\"search\":_vm.onSearch}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search-history\"},[_c('van-cell',{attrs:{\"title\":\"搜索历史\"},scopedSlots:_vm._u([{key:\"right-icon\",fn:function(){return [(_vm.isDeleteShow)?[_c('span',{staticStyle:{\"margin-right\":\"5px\"},on:{\"click\":_vm.clearAll}},[_vm._v(\"全部删除\")]),_c('span',[_vm._v(\"完成\")])]:_c('van-icon',{staticClass:\"delete-icon\",attrs:{\"name\":\"delete\"},on:{\"click\":function($event){_vm.isDeleteShow = true}}})]},proxy:true}])}),_vm._l((_vm.searchHistories),function(value,index){return _c('van-cell',{key:index,attrs:{\"title\":value},on:{\"click\":function($event){return _vm.onClearHistory(value, index)}},scopedSlots:_vm._u([(_vm.isDeleteShow)?{key:\"right-icon\",fn:function(){return [_c('van-icon',{staticClass:\"delete-icon\",attrs:{\"name\":\"close\"}})]},proxy:true}:null],null,true)})})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"search-history\">\r\n    <van-cell title=\"搜索历史\">\r\n      <template #right-icon>\r\n        <template v-if=\"isDeleteShow\">\r\n          <span style=\"margin-right: 5px\" @click=\"clearAll\">全部删除</span>\r\n          <span>完成</span>\r\n        </template>\r\n        <van-icon\r\n          name=\"delete\"\r\n          class=\"delete-icon\"\r\n          v-else\r\n          @click=\"isDeleteShow = true\"\r\n        />\r\n      </template>\r\n    </van-cell>\r\n\r\n    <van-cell\r\n      :title=\"value\"\r\n      v-for=\"(value, index) in searchHistories\"\r\n      :key=\"index\"\r\n      @click=\"onClearHistory(value, index)\"\r\n    >\r\n      <template #right-icon v-if=\"isDeleteShow\">\r\n        <van-icon name=\"close\" class=\"delete-icon\" />\r\n      </template>\r\n    </van-cell>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'searchHistory',\r\n  props: {\r\n    searchHistories: {\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      isDeleteShow: false\r\n    }\r\n  },\r\n  methods: {\r\n    clearAll () {\r\n      this.$emit('clearAll')\r\n    },\r\n    onClearHistory (value, index) {\r\n      if (this.isDeleteShow) {\r\n        this.$emit('clearHistory', index)\r\n      } else {\r\n        this.$emit('search', value)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search-history {\r\n  .delete-icon {\r\n    font-size: 28px;\r\n    line-height: 48px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search-history.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search-history.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-history.vue?vue&type=template&id=689cc362&scoped=true&\"\nimport script from \"./search-history.vue?vue&type=script&lang=js&\"\nexport * from \"./search-history.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search-history.vue?vue&type=style&index=0&id=689cc362&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"689cc362\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search-suggestion\"},_vm._l((_vm.suggestions),function(item,index){return _c('van-cell',{key:index,attrs:{\"icon\":\"search\"},on:{\"click\":function($event){return _vm.$emit('search',item)}},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('span',{attrs:{\"slot\":\"title\"},domProps:{\"innerHTML\":_vm._s(_vm.highlight(item))},slot:\"title\"})]},proxy:true}],null,true)})}),1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"search-suggestion\">\r\n    <van-cell icon=\"search\" v-for=\"(item, index) in suggestions\" :key=\"index\" @click=\"$emit('search',item)\">\r\n      <template #title>\r\n        <span slot=\"title\" v-html=\"highlight(item)\"></span>\r\n      </template>\r\n    </van-cell>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSearchSuggestionsAPI } from '../../../api/index.js'\r\nimport { debounce } from 'lodash'\r\nexport default {\r\n  name: 'searchSuggestion',\r\n  data () {\r\n    return {\r\n      suggestions: []\r\n    }\r\n  },\r\n  props: {\r\n    searchText: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  watch: {\r\n    searchText: {\r\n      handler: debounce(function (newValue) {\r\n        this.loadSearchSuggestion(newValue)\r\n      }, 200),\r\n      immediate: true\r\n    }\r\n\r\n  },\r\n  methods: {\r\n    async loadSearchSuggestion (newVal) {\r\n      try {\r\n        const { data: res } = await getSearchSuggestionsAPI(newVal)\r\n        console.log(res)\r\n        if (res.data.options && res.data.options[0] === null) {\r\n          res.data.options[0] = this.searchText\r\n        }\r\n        this.suggestions = res.data.options\r\n      } catch {\r\n        this.$toast('获取失败')\r\n      }\r\n    },\r\n    highlight (text) {\r\n      const highlightStr = `<span class=\"active\">${this.searchText}</span>`\r\n      return text.split(this.searchText).join(highlightStr)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search-suggestion {\r\n  /deep/ span.active {\r\n    color: red;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search-suggestion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search-suggestion.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-suggestion.vue?vue&type=template&id=eeac837a&scoped=true&\"\nimport script from \"./search-suggestion.vue?vue&type=script&lang=js&\"\nexport * from \"./search-suggestion.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search-suggestion.vue?vue&type=style&index=0&id=eeac837a&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"eeac837a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search-result\"},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"error\":_vm.error,\"error-text\":\"请求失败，点击重试\"},on:{\"update:error\":function($event){_vm.error=$event},\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item){return _c('van-cell',{key:item.art_id,attrs:{\"title\":item.title}})}),1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"search-result\">\r\n    <van-list\r\n      v-model=\"loading\"\r\n      :finished=\"finished\"\r\n      finished-text=\"没有更多了\"\r\n      :error.sync=\"error\"\r\n      error-text=\"请求失败，点击重试\"\r\n      @load=\"onLoad\"\r\n    >\r\n      <van-cell v-for=\"item in list\" :key=\"item.art_id\" :title=\"item.title\" />\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSearchResultAPI } from '../../../api/index.js'\r\nexport default {\r\n  name: 'SearchResult',\r\n  data () {\r\n    return {\r\n      list: [],\r\n      loading: false,\r\n      finished: false,\r\n      page: 1,\r\n      perPage: 20,\r\n      error: false\r\n    }\r\n  },\r\n  props: {\r\n    searchText: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  methods: {\r\n    async onLoad () {\r\n      try {\r\n        const { data: res } = await getSearchResultAPI({\r\n          page: this.page,\r\n          per_page: this.perPage,\r\n          q: this.searchText\r\n        })\r\n        console.log(res.data.results)\r\n        this.list.push(...res.data.results)\r\n        this.loading = false\r\n        if (res.data.results.length) {\r\n          this.page++\r\n        } else {\r\n          this.finished = true\r\n        }\r\n      } catch (error) {\r\n        this.error = true\r\n        this.loading = false\r\n        this.$toast('请求失败，请稍后重试')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>\r\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search-result.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search-result.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-result.vue?vue&type=template&id=4af3fd30&scoped=true&\"\nimport script from \"./search-result.vue?vue&type=script&lang=js&\"\nexport * from \"./search-result.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4af3fd30\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"search-container\">\r\n    <!-- 顶部搜索事件监听\r\n    Tips: 在 van-search 外层增加 form 标签，且 action 不为空，即可在 iOS 输入法中显示搜索按钮。\r\n    -->\r\n    <form action=\"/\">\r\n      <van-search\r\n        v-model=\"searchText\"\r\n        show-action\r\n        background=\"#3296fa\"\r\n        placeholder=\"请输入搜索关键词\"\r\n        @search=\"onSearch\"\r\n        @cancel=\"onCancel\"\r\n        @focus=\"isResultShow = false\"\r\n      />\r\n    </form>\r\n    <search-result v-if=\"isResultShow\" :searchText=\"searchText\"></search-result>\r\n\r\n    <search-suggestion\r\n      v-else-if=\"searchText\"\r\n      :searchText=\"searchText\"\r\n      @search=\"onSearch\"\r\n    ></search-suggestion>\r\n\r\n    <search-history\r\n      v-else ref=\"search-history\"\r\n      :searchHistories=\"searchHistories\"\r\n      @clearAll=\"searchHistories = []\"\r\n      @clearHistory=\"onClearHistory\"\r\n      @search=\"onSearch\"\r\n    ></search-history>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SearchHistory from './components/search-history.vue'\r\nimport SearchSuggestion from './components/search-suggestion.vue'\r\nimport SearchResult from './components/search-result.vue'\r\nimport { getItem, setItem } from '../../utils/storage.js'\r\nexport default {\r\n  name: 'searchIndex',\r\n  data () {\r\n    return {\r\n      searchText: '',\r\n      isResultShow: false,\r\n      searchHistories: getItem('TOUTIAO_SEARCH_HISTORY') || []\r\n    }\r\n  },\r\n  watch: {\r\n    searchHistories: {\r\n      handler (newVal) {\r\n        setItem('TOUTIAO_SEARCH_HISTORY', newVal)\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  components: {\r\n    SearchHistory,\r\n    SearchSuggestion,\r\n    SearchResult\r\n  },\r\n  methods: {\r\n    onSearch (value) {\r\n      this.searchText = value\r\n      this.isResultShow = true\r\n      this.onAddTarget(value)\r\n    },\r\n    onAddTarget (value) {\r\n      const index = this.searchHistories.indexOf(value)\r\n      if (index !== -1) {\r\n        this.searchHistories.splice(index, 1)\r\n      }\r\n      this.searchHistories.unshift(value)\r\n    },\r\n\r\n    onClearHistory (index) {\r\n      this.searchHistories.splice(index, 1)\r\n    },\r\n\r\n    onCancel () {\r\n      this.$toast('取消')\r\n      this.$router.back()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search-container {\r\n  .van-search__action {\r\n    color: white;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=199cb804&scoped=true&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=199cb804&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"199cb804\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","onSearch","onCancel","$event","isResultShow","model","value","searchText","callback","$$v","expression","ref","searchHistories","onClearHistory","staticRenderFns","scopedSlots","_u","key","fn","isDeleteShow","staticStyle","clearAll","_v","proxy","_l","index","name","props","type","default","data","methods","component","suggestions","item","$emit","domProps","_s","highlight","slot","watch","handler","immediate","console","res","finished","error","onLoad","loading","list","art_id","title","page","perPage","per_page","q","setItem","deep","components","SearchHistory","SearchSuggestion","SearchResult","onAddTarget"],"sourceRoot":""}